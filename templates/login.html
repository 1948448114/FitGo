{% extends "header.html" %}
{% block header %}

 <style type="text/css">
 #form_input{
    width: 70%;
    padding-top: 20px;
    padding-left: 500px;

 }
 #message{
    width: 70%;
    padding-left: 500px;
    padding-top: 20px;
    text-align: center;
 }
 </style>
{% end %}

{% block body %}
<div id="message">

</div>
<div id="form_input">
    <div class="form-group" class="col-sm-10">
        <label for="email" >Email</label>
        <input type="text" class="form-control" id="email"
        placeholder="Info_Email">
    </div class="col-sm-10">
    <div class="form-group">
        <label for="user_password" >Password</label>
        <input type="password" class="form-control" id="user_password"
        placeholder="Password">
    </div>
    <div class="form-group" class="col-sm-10">
        <label for="code" >Code</label>
        <input type="text" class="form-control" id="code"
        placeholder="Code">
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button id="sub" class="btn btn-primary">LogIn</button>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
       $("#sub").click(function() {
           jQuery.ajax({
             url: '/auth/login',
             type: 'POST',
             dataType:'json',
             data: {
                    'email':$("#email").val(),
                    'user_password':$("#user_password").val(),
                    'code':$("#code").val()
                    },
             success: function(data, textStatus, xhr) {
                // result = data.parseJSON();
                if(data['code']==200){
                    $("#message").append('<p class="bg-success">登录成功</p>');
                }
                else{
                    $("#message").append('<p class="bg-danger">'+data['content']+'</p>');
                }
             },
             error: function(xhr, textStatus, errorThrown) {
                alert(errorThrown);
                $("#message").append('<p class="bg-danger">网络无法连接T_T</p>');
             }

           });
           
       }); 
    });
    
</script>
{% end %}



